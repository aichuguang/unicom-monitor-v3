# 联通流量监控系统 v3.0 - 项目说明

## 📖 项目简介

联通流量监控系统 v3.0 是一个基于 Vue 3 + Flask 的现代化流量监控平台，支持多账号管理、实时流量查询、智能监控告警等功能。系统采用前后端分离架构，提供响应式设计，完美适配桌面端和移动端。

### 🎯 核心功能
- **多账号管理**: 支持最多5个联通账号同时监控
- **实时流量查询**: 快速获取当前流量使用情况
- **智能监控**: 自动监控流量变化，支持多种告警方式
- **数据统计**: 流量变化趋势分析，支持基准重置
- **通知推送**: 邮件、微信推送等多种通知方式
- **用户系统**: 完整的用户注册、登录、权限管理

## 🏗️ 技术架构

### 前端技术栈
```
Vue 3.3.8          # 渐进式JavaScript框架
Element Plus 2.4.4  # 企业级UI组件库
Pinia 2.1.7        # 新一代状态管理
Vue Router 4.2.5   # 官方路由管理器
Axios 1.6.2        # HTTP请求库
Tailwind CSS 3.3.6 # 原子化CSS框架
Vite 5.0.0         # 下一代构建工具
```

### 后端技术栈
```
Python 3.8+        # 编程语言
Flask 2.3.3        # 轻量级Web框架
SQLAlchemy 2.0.23  # Python SQL工具包和ORM
SQLite 3           # 轻量级数据库
Flask-CORS         # 跨域资源共享
APScheduler        # 高级Python调度器
Requests 2.31.0    # HTTP库
```

## 📁 项目结构详解

```
unicom-monitor-v3/
├── frontend/                    # 前端项目目录
│   ├── src/
│   │   ├── views/              # 页面组件
│   │   │   ├── HomePage.vue         # 首页 - 流量查询主界面
│   │   │   ├── ConfigPage.vue       # 配置页 - 账号管理和系统配置
│   │   │   ├── ProfilePage.vue      # 个人中心 - 用户信息管理
│   │   │   ├── HelpPage.vue         # 使用说明 - 教程和FAQ
│   │   │   ├── LoginPage.vue        # 登录页
│   │   │   ├── RegisterPage.vue     # 注册页
│   │   ├── components/         # 组件目录
│   │   │   ├── layout/             # 布局组件
│   │   │   │   ├── AppHeader.vue        # 顶部导航栏
│   │   │   │   ├── AppSidebar.vue       # 侧边栏（桌面端）
│   │   │   │   └── AppBottomNav.vue     # 底部导航（移动端）
│   │   │   ├── common/             # 通用组件
│   │   │   │   └── GlobalMessage.vue   # 全局消息组件
│   │   │   └── MobileSheet.vue     # 移动端底部弹窗
│   │   ├── stores/             # Pinia状态管理
│   │   │   ├── app.js              # 应用全局状态
│   │   │   └── user.js             # 用户状态管理
│   │   ├── utils/              # 工具函数
│   │   │   ├── api.js              # API接口封装
│   │   │   ├── icons.js            # 图标统一管理
│   │   │   └── storage.js          # 本地存储工具
│   │   ├── router/             # 路由配置
│   │   │   └── index.js            # 路由定义和守卫
│   │   ├── style.css           # 全局样式
│   │   └── main.js             # 应用入口
│   ├── package.json            # 前端依赖配置
│   ├── vite.config.js          # Vite构建配置
│   └── tailwind.config.js      # Tailwind CSS配置
├── backend/                     # 后端项目目录
│   ├── app/
│   │   ├── __init__.py         # Flask应用工厂
│   │   ├── api/                # API蓝图
│   │   │   ├── auth.py             # 认证相关API
│   │   │   ├── unicom.py           # 联通账号管理API
│   │   │   ├── flow.py             # 流量查询API
│   │   │   ├── monitor.py          # 监控配置API
│   │   │   ├── notify.py           # 通知相关API
│   │   │   ├── settings.py         # 系统设置API
│   │   │   └── admin.py            # 管理员API
│   │   ├── models/             # 数据模型
│   │   │   ├── user.py             # 用户模型
│   │   │   ├── unicom_account.py   # 联通账号模型
│   │   │   ├── flow_record.py      # 流量记录模型
│   │   │   └── monitor_setting.py  # 监控配置模型
│   │   ├── core/               # 核心配置
│   │   │   ├── config.py           # 应用配置
│   │   │   ├── database.py         # 数据库配置
│   │   │   └── security.py         # 安全配置
│   │   ├── utils/              # 工具函数
│   │   │   ├── unicom_api.py       # 联通API封装
│   │   │   ├── notification.py     # 通知服务
│   │   │   └── scheduler.py        # 定时任务
│   │   └── services/           # 业务服务层
│   ├── requirements.txt        # Python依赖
│   ├── run.py                  # 应用启动文件
│   └── config.py               # 配置文件
├── docs/                        # 文档目录
│   ├── 项目说明.md              # 本文档
│   ├── API文档.md               # API接口文档
│   └── 部署指南.md              # 部署说明
└── README.md                    # 项目README
```

## 🔧 开发环境搭建

### 环境要求
- **Node.js**: 16.0+ (推荐 18.x)
- **Python**: 3.8+ (推荐 3.9+)
- **Git**: 最新版本

### 前端开发环境
```bash
# 进入前端目录
cd frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 访问地址: http://localhost:5173
```

### 后端开发环境
```bash
# 进入后端目录
cd backend

# 创建虚拟环境（推荐）
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或
venv\Scripts\activate     # Windows

# 安装依赖
pip install -r requirements.txt

# 启动开发服务器
python run.py

# 访问地址: http://localhost:5000
```

## 📱 功能模块详解

### 1. 用户系统
- **注册登录**: 支持邮箱注册，密码加密存储
- **个人中心**: 用户信息修改、密码修改、账号注销

### 2. 联通账号管理
- **多账号支持**: 每个用户最多添加5个联通账号
- **账号认证**: 通过手机验证码完成账号绑定
- **状态监控**: 实时显示账号认证状态和可用性

### 3. 流量查询
- **实时查询**: 快速获取当前流量使用情况
- **数据缓存**: 智能缓存机制，减少API调用频率
- **统计分析**: 流量变化趋势，支持基准重置

### 4. 监控告警
- **智能监控**: 自动检测流量异常变化
- **多种告警**: 支持邮件、微信推送等通知方式
- **灵活配置**: 可自定义监控规则和告警阈值

## ⚠️ 重要注意事项

### 联通API相关
1. **Token获取**: 需要通过抓包获取联通APP的Token
2. **AppID获取**: 
   - 安卓: `/storage/Unicom/appid` 等路径
   - iOS: 需要通过抓包工具获取
3. **验证码**: 使用联通APP获取验证码进行账号认证
4. **频率限制**: 避免频繁调用联通API，建议使用缓存

### 安全注意事项
1. **敏感信息**: Token、Cookie等敏感信息加密存储
2. **CORS配置**: 生产环境需要正确配置跨域
3. **输入验证**: 所有用户输入都需要进行验证
4. **错误处理**: 避免敏感信息泄露

### 性能优化
1. **数据缓存**: 合理使用缓存减少API调用
2. **懒加载**: 路由组件采用懒加载
3. **图片优化**: 使用适当的图片格式和大小
4. **代码分割**: Vite自动进行代码分割优化

## 🔍 常见问题解决

### 开发环境问题
1. **端口冲突**: 修改vite.config.js中的端口配置
2. **依赖安装失败**: 清除缓存后重新安装
3. **跨域问题**: 检查后端CORS配置

### 功能问题
1. **登录失败**: 检查用户名密码和网络连接
2. **流量查询失败**: 验证联通账号Token是否有效
3. **通知不工作**: 检查通知服务配置

### 部署问题
1. **静态资源404**: 检查Nginx配置
2. **API请求失败**: 确认后端服务正常运行
3. **数据库连接失败**: 检查数据库配置和权限

## 📊 数据库设计

### 核心数据表
- **users**: 用户基本信息
- **unicom_accounts**: 联通账号信息
- **flow_records**: 流量查询记录
- **monitor_settings**: 监控配置
- **notifications**: 通知记录
- **system_logs**: 系统日志

## 🎨 UI/UX设计规范

### 设计原则
- **响应式优先**: 移动端优先设计，桌面端适配
- **一致性**: 统一的颜色、字体、间距规范
- **可访问性**: 良好的对比度和键盘导航支持
- **用户体验**: 直观的操作流程和及时的反馈

### 颜色规范
```css
/* 主色调 */
--primary-color: #3B82F6;      /* 蓝色 */
--primary-light: #60A5FA;      /* 浅蓝色 */
--primary-dark: #1D4ED8;       /* 深蓝色 */

/* 功能色 */
--success-color: #10B981;      /* 成功绿 */
--warning-color: #F59E0B;      /* 警告黄 */
--error-color: #EF4444;        /* 错误红 */
--info-color: #6B7280;         /* 信息灰 */

/* 中性色 */
--gray-50: #F9FAFB;
--gray-100: #F3F4F6;
--gray-200: #E5E7EB;
--gray-300: #D1D5DB;
--gray-400: #9CA3AF;
--gray-500: #6B7280;
--gray-600: #4B5563;
--gray-700: #374151;
--gray-800: #1F2937;
--gray-900: #111827;
```

### 组件规范
- **按钮**: 圆角8px，统一的hover和active状态
- **卡片**: 圆角12px，阴影效果
- **输入框**: 圆角8px，focus状态边框高亮
- **间距**: 基于4px的倍数系统

## 🔐 安全机制详解

### 前端安全
1. **JWT认证**: 使用JWT Token进行用户身份验证
2. **路由守卫**: 未登录用户自动跳转到登录页
3. **输入验证**: 所有表单输入都进行客户端验证
4. **XSS防护**: 使用Vue的内置XSS防护机制

### 后端安全
1. **密码加密**: 使用bcrypt进行密码哈希
2. **SQL注入防护**: 使用SQLAlchemy ORM防止SQL注入
3. **CORS配置**: 严格的跨域资源共享配置
4. **请求频率限制**: 防止API滥用

### 数据安全
1. **敏感信息加密**: Token、Cookie等敏感信息加密存储
2. **数据备份**: 定期备份重要数据
3. **日志记录**: 记录关键操作日志
4. **权限控制**: 基于角色的访问控制

## 📈 性能优化策略

### 前端优化
1. **代码分割**: 路由级别的代码分割
2. **懒加载**: 组件和图片懒加载
3. **缓存策略**: 合理的HTTP缓存配置
4. **资源压缩**: 生产环境资源压缩

### 后端优化
1. **数据库索引**: 关键字段建立索引
2. **查询优化**: 避免N+1查询问题
3. **缓存机制**: 流量数据缓存
4. **异步处理**: 耗时操作异步处理

## 🐛 调试和测试

### 前端调试
```bash
# 开发模式启动
npm run dev

# 构建生产版本
npm run build

# 预览生产版本
npm run preview

# 代码检查
npm run lint
```

### 后端调试
```bash
# 开发模式启动
python run.py

# 数据库迁移
flask db upgrade

# 运行测试
python -m pytest

# 代码格式化
black app/
```

### 常用调试技巧
1. **浏览器开发者工具**: 网络面板查看API请求
2. **Vue DevTools**: 组件状态和事件调试
3. **Python调试器**: 使用pdb进行断点调试
4. **日志分析**: 查看应用日志定位问题

## 🚀 部署准备清单

### 环境准备
- [ ] 服务器环境配置（Linux推荐）
- [ ] Python 3.8+ 环境
- [ ] Node.js 16+ 环境
- [ ] Nginx Web服务器
- [ ] SSL证书配置

### 代码准备
- [ ] 前端代码构建
- [ ] 后端依赖安装
- [ ] 数据库初始化
- [ ] 配置文件设置

### 安全配置
- [ ] 防火墙配置
- [ ] HTTPS配置
- [ ] 数据库安全配置
- [ ] 备份策略制定

## 📞 技术支持

### 开发环境问题
1. **联系方式**: 通过GitHub Issues提交问题
2. **文档参考**: 查看docs目录下的详细文档
3. **社区支持**: 相关技术社区求助

### 生产环境问题
1. **日志分析**: 查看应用和系统日志
2. **监控告警**: 设置系统监控和告警
3. **备份恢复**: 定期备份和恢复测试


**最后更新**: 2025-09-25
**版本**: v3.0.0

> 📝 **说明**: 本文档将随着项目开发进度持续更新，请定期查看最新版本。
